{% extends 'main.html' %}

{% block title %}
Search Results | Netvibe
{% endblock title %}

{% block content %}
<h1>Search query</h1>

{% if users %}
<div class="d-flex flex-row flex-wrap">
    {% for user in users %}
    <div class="card flex-row flex-grow-1 p-2 mx-2 my-2 align-items-center">
        <a class="profile-link" href="#">
            <div class="card-image m-2">
                <img class="" src="{{user.profile_image.url}}" alt="photo">
            </div>
        </a>
        <a class="profile-link" href="">
            <div class="card-center px-2">
                <h4 class="card-title">{{user.0.username}}</h4>
                {% if user.1 %}
                <p class="card-text"><a href="#" onclick="createOrReturnPrivateChat('{{user.0.id}}')">Send a
                        Message</a></p>
                {% endif %}

            </div>
        </a>
        <div class="d-flex flex-row card-right flex-grow-1 justify-content-end mx-2">
            {% if user.1 %}
            <div class="d-flex flex-row friends-text-container p-3">
                <p class="friends-text m-auto">
                    Friends
                </p>
                <span class="material-icons checkmark-icon m-auto pl-2">
                    check_circle_outline
                </span>
            </div>
            {% else %}
            {% if user.0 != request.user %}
            <div class="d-flex flex-row friends-text-container p-3">
                <p class="friends-text m-auto">
                    Not Friends
                </p>
                <span class="material-icons cancel-icon m-auto pl-2">cancel</span>
            </div>
            {% endif %}
            {% endif %}
            {% if user == request.user %}
            <div class="d-flex flex-row friends-text-container p-3">
                <p class="friends-text m-auto">
                    This is you
                </p>
                <span class="material-icons m-auto pl-2">
                    person_pin
                </span>
            </div>
            {% endif %}
        </div>
    </div>
    {% if forloop.counter|divisibleby:2 %}
</div>
<div class="d-flex flex-row flex-wrap">
    {% endif %}

    {% endfor %}

    {% else %} <!-- If no friends -->
    <div class="d-flex flex-row flex-grow-1 justify-content-center align-items-center p-4">
        <p>No results</p>
    </div>
    {% endif %}
    {% endblock content %}